<!doctype html>
<html>
<head>
    <title>chat room demo</title>
    <meta http-equiv="content-type" content="txt/html; charset=utf-8" />
</head>
<body>
<div>
    <h5>chat room damo</h5>
    <ul class="chat-list">
    </ul>
</div>
<button type="button" id="connect" onclick="connectChatRoom()">连接</button>
<button type="button" id="disconnect" onclick="disconnectChatRoom()">断开</button>
<input type="text" name="msg" id="msg">
<button type="button" id="send-msg" onclick="sendMsg()">发送消息</button>
</body>
</html>
<script type="text/javascript">
    let addr = 'ws://120.77.85.124:9501', ws;

    function connectChatRoom() {
        ws = new WebSocket(addr);

        ws.onopen = function () {
            console.log('connect...');
        };

        ws.onmessage = function (evt) {
            console.log(evt.data);
        };

        ws.onclose = function () {
            console.log('websocket closed');
        };

        ws.onerror = function () {
            console.log('error');
        }
    }

    function disconnectChatRoom() {
        console.log('disconnect...');
    }

    function sendMsg() {
        if (!ws) {
            alert('请先连接服务器');
            return;
        }

        let msg = document.getElementById('msg').value;
        ws.send(msg);
        console.log('send msg...');
    }
</script>